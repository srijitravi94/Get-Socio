<app-header></app-header>
<div class="register text-center">
  <h3>Register</h3>

  <form class="form-horizontal"
        role="form"
        name="registerForm"
        novalidate
        #registerForm="ngForm">

    <div class="form-group">
      <div class="input-group">
        <span class="input-group-addon">
           <i class="fa fa-ellipsis-h"></i>
        </span>
        <input type="text"
                id="firstName"
                class="form-control"
                [ngClass]="{'is-invalid': firstNameField.touched && firstNameField.invalid}"
                placeholder="First name"
                name = "firstName"
                [(ngModel)] ="firstName"
                #firstNameField = "ngModel"
                required />

        <div *ngIf="firstNameField.touched && firstNameField.invalid"
             class="invalid-feedback">
          First name is required
        </div>
      </div>
    </div>

    <div class="form-group">
      <div class="input-group">
        <span class="input-group-addon">
            <i class="fa fa-ellipsis-h"></i>
        </span>
        <input type="text"
               id="lastName"
               class="form-control"
               [ngClass]="{'is-invalid': lastNameField.touched && lastNameField.invalid}"
               placeholder="Last name"
               name = "lastName"
               [(ngModel)] ="lastName"
               #lastNameField = "ngModel"
               required />

        <div *ngIf="lastNameField.touched && lastNameField.invalid"
             class="invalid-feedback">
          Last name is required
        </div>
      </div>
    </div>

    <div class="form-group">
      <div class="input-group">
                <span class="input-group-addon">
                    <i class="fa fa-user"></i>
                </span>
        <input type="text"
               id="username"
               class="form-control"
               [ngClass]="{'is-invalid': (usernameField.touched && usernameField.invalid) || errorMessage}"
               placeholder="Username"
               name = "username"
               [(ngModel)] ="username"
               #usernameField = "ngModel"
               required />

        <div *ngIf="usernameField.touched && usernameField.invalid"
             class="invalid-feedback">
          User name is required
        </div>
        <div *ngIf="errorMessage"
             class="invalid-feedback">
          {{errorMessage}}
        </div>
      </div>
    </div>

    <div class="form-group">
      <div class="input-group">
        <span class="input-group-addon">
            <i class="fa fa-lock"></i>
        </span>
        <input type="password"
               id="password"
               class="form-control"
               [ngClass]="{'is-invalid': (passwordField.touched && passwordField.invalid)}"
               placeholder="Password"
               name = "password"
               [(ngModel)] ="password"
               #passwordField = "ngModel"
               required />

        <div *ngIf="passwordField.touched && passwordField.invalid"
             class="invalid-feedback">
          Password is required
        </div>
      </div>
    </div>

    <div class="form-group">
      <div class="input-group">
        <span class="input-group-addon">
            <i class="fa fa-lock"></i>
        </span>
        <input type="password"
               id="verifyPassword"
               class="form-control"
               [ngClass]="{'is-invalid': (verifyPasswordField.touched && verifyPasswordField.valid) && (password !== verifyPassword) || (verifyPasswordField.touched &&verifyPasswordField.invalid)}"
               placeholder="Verify Password"
               name = "verifyPassword"
               [(ngModel)] ="verifyPassword"
               #verifyPasswordField = "ngModel"
               required />

        <div *ngIf="verifyPasswordField.touched && verifyPasswordField.valid && (password !== verifyPassword) || (verifyPasswordField.touched &&verifyPasswordField.invalid)"
             class="invalid-feedback">
          Sorry, the passwords must match
        </div>
      </div>
    </div>

    <div class="form-group">
      <button type="submit"
              class="btn btn-block btn-primary btn-default"
              [disabled] = "(registerForm.invalid) || (password !== verifyPassword)"
              (click)="register(firstName, lastName, username, password)">
        Sign up
      </button>
    </div>

    <div class="row pull-right">
      <a routerLink="/login">Already a member?</a>
    </div>

  </form>
</div>


